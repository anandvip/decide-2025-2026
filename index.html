<!--
==============================================================================
PROJECT METADATA
==============================================================================
Date Created: 2025-08-18
Last Modified: 2025-08-18
AI Tool: Claude Sonnet 4
Version: 1.0
Generated By: Anthropic Claude

==============================================================================
PROMPT HISTORY
==============================================================================
Initial Prompt: "Target Users: Would this be for personal decision-making, business strategy, or both?[personal first]Complexity Level: Should we start with a simplified version (5-7 steps) or build the full 14-step framework?[full]Data Export: Would users want to export their analysis as PDFs, share with teams, or integrate with other tools?[explain what other tools?, well formatted html CSS js all in single file export. yes]Mobile vs Desktop: Given the detailed nature, should we prioritize desktop experience or make it mobile-friendly?[both but preferably mobile friendly]Collaboration Features: Should multiple people be able to work on the same decision analysis?[this will make tool bulkier and will require backend like firestore and authentication Google auth, make suggestions and we think about it deeply]"

==============================================================================
PROJECT DETAILS
==============================================================================
Purpose: Comprehensive decision analysis tool based on 14-step consequences evaluation framework
Features: Guided wizard, EV calculations, visual progress, auto-save, HTML export
Target Audience: Personal decision-makers seeking systematic consequence analysis
Complexity Level: Advanced (14-step framework)

==============================================================================
TECHNICAL SPECIFICATIONS
==============================================================================
HTML Version: HTML5
CSS Features: CSS Grid, Flexbox, Custom Properties, Mobile-first responsive, Animations
JavaScript Features: ES6+, LocalStorage, Dynamic calculations, JSON export/import
Browser Compatibility: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
Responsive: Yes - Mobile-first design

==============================================================================
-->

<!DOCTYPE html>
<html lang="en" 
      data-ai-tool="claude-sonnet-4" 
      data-creation-date="2025-08-18"
      data-prompt-count="1"
      data-complexity="advanced"
      data-category="decision-analysis">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéØ Decision Analysis Tool - Smart Consequences Evaluation</title>
<meta name="description" content="Systematic 14-step framework for analyzing decision consequences, calculating expected values, and making informed choices">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Decision Analysis & Consequences Evaluation Tool",
  "description": "Advanced decision-making framework with expected value calculations",
  "creator": {
    "@type": "SoftwareApplication",
    "name": "Claude",
    "version": "Sonnet 4"
  },
  "dateCreated": "2025-08-18",
  "programmingLanguage": ["HTML", "CSS", "JavaScript"]
}
</script>

<style>
:root {
  /* Color Palette */
  --primary-blue: #2563eb;
  --primary-blue-dark: #1d4ed8;
  --secondary-green: #059669;
  --secondary-green-light: #d1fae5;
  --accent-orange: #ea580c;
  --accent-purple: #7c3aed;
  
  /* Neutral Colors */
  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-600: #4b5563;
  --gray-700: #374151;
  --gray-800: #1f2937;
  --gray-900: #111827;
  
  /* Status Colors */
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
  --info: #3b82f6;
  
  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  
  /* Typography */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
  
  /* Border Radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.6;
  color: var(--gray-800);
  background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
  min-height: 100vh;
}

/* Header */
.header {
  background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-dark) 100%);
  color: white;
  padding: var(--space-lg) var(--space-md);
  text-align: center;
  box-shadow: var(--shadow-lg);
  position: sticky;
  top: 0;
  z-index: 100;
}

.header h1 {
  font-size: var(--text-2xl);
  font-weight: 700;
  margin-bottom: var(--space-sm);
}

.header p {
  font-size: var(--text-sm);
  opacity: 0.9;
  max-width: 600px;
  margin: 0 auto;
}

/* Progress Bar */
.progress-container {
  background: white;
  padding: var(--space-md);
  box-shadow: var(--shadow-sm);
  border-bottom: 1px solid var(--gray-200);
}

.progress-bar {
  width: 100%;
  height: 8px;
  background: var(--gray-200);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--secondary-green) 0%, var(--primary-blue) 100%);
  transition: width 0.3s ease;
  border-radius: var(--radius-lg);
}

.progress-text {
  text-align: center;
  margin-top: var(--space-sm);
  font-size: var(--text-sm);
  color: var(--gray-600);
  font-weight: 600;
}

/* Main Container */
.container {
  max-width: 800px;
  margin: 0 auto;
  padding: var(--space-md);
}

/* Step Cards */
.step-card {
  background: white;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  margin-bottom: var(--space-xl);
  overflow: hidden;
  border: 1px solid var(--gray-200);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.step-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.step-header {
  background: linear-gradient(135deg, var(--primary-blue) 0%, var(--accent-purple) 100%);
  color: white;
  padding: var(--space-lg);
  position: relative;
}

.step-number {
  position: absolute;
  top: var(--space-md);
  right: var(--space-md);
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: var(--text-lg);
}

.step-title {
  font-size: var(--text-xl);
  font-weight: 700;
  margin-bottom: var(--space-sm);
  padding-right: 60px;
}

.step-description {
  font-size: var(--text-sm);
  opacity: 0.9;
  line-height: 1.5;
}

.step-content {
  padding: var(--space-xl);
}

/* Form Elements */
.form-group {
  margin-bottom: var(--space-lg);
}

.form-label {
  display: block;
  font-weight: 600;
  color: var(--gray-700);
  margin-bottom: var(--space-sm);
  font-size: var(--text-sm);
}

.form-input, .form-textarea, .form-select {
  width: 100%;
  padding: var(--space-md);
  border: 2px solid var(--gray-300);
  border-radius: var(--radius-lg);
  font-size: var(--text-base);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
  background: white;
}

.form-input:focus, .form-textarea:focus, .form-select:focus {
  outline: none;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.form-textarea {
  resize: vertical;
  min-height: 100px;
}

/* Option Grid */
.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
}

.option-card {
  border: 2px solid var(--gray-300);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  background: white;
  transition: all 0.2s ease;
  cursor: pointer;
}

.option-card:hover {
  border-color: var(--primary-blue);
  box-shadow: var(--shadow-md);
}

.option-card.selected {
  border-color: var(--secondary-green);
  background: var(--secondary-green-light);
}

/* EV Calculator */
.ev-calculator {
  background: var(--gray-50);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  margin: var(--space-lg) 0;
  border: 1px solid var(--gray-200);
}

.probability-impact-grid {
  display: grid;
  grid-template-columns: 1fr 1fr auto;
  gap: var(--space-md);
  align-items: end;
  margin-bottom: var(--space-md);
}

.ev-result {
  text-align: center;
  padding: var(--space-md);
  background: white;
  border-radius: var(--radius-lg);
  border: 2px solid var(--secondary-green);
}

.ev-score {
  font-size: var(--text-2xl);
  font-weight: bold;
  color: var(--secondary-green);
}

/* Timeline Section */
.timeline-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-md);
  margin: var(--space-lg) 0;
}

.timeline-card {
  background: var(--gray-50);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  border: 1px solid var(--gray-200);
  text-align: center;
}

.timeline-title {
  font-weight: bold;
  color: var(--primary-blue);
  margin-bottom: var(--space-sm);
}

/* Stakeholder Matrix */
.stakeholder-grid {
  display: grid;
  gap: var(--space-md);
  margin: var(--space-lg) 0;
}

.stakeholder-item {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: var(--space-md);
  align-items: center;
  padding: var(--space-md);
  background: white;
  border-radius: var(--radius-lg);
  border: 1px solid var(--gray-200);
}

/* Impact Buttons */
.impact-buttons {
  display: flex;
  gap: var(--space-sm);
}

.impact-btn {
  padding: var(--space-sm) var(--space-md);
  border: 2px solid var(--gray-300);
  background: white;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--text-xs);
  font-weight: 600;
  transition: all 0.2s ease;
}

.impact-btn.positive {
  border-color: var(--secondary-green);
  color: var(--secondary-green);
}

.impact-btn.positive.selected {
  background: var(--secondary-green);
  color: white;
}

.impact-btn.negative {
  border-color: var(--danger);
  color: var(--danger);
}

.impact-btn.negative.selected {
  background: var(--danger);
  color: white;
}

/* Action Buttons */
.action-buttons {
  display: flex;
  gap: var(--space-md);
  justify-content: center;
  margin: var(--space-2xl) 0;
  flex-wrap: wrap;
}

.btn {
  padding: var(--space-md) var(--space-xl);
  border: none;
  border-radius: var(--radius-lg);
  font-weight: 600;
  font-size: var(--text-base);
  cursor: pointer;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
  text-decoration: none;
}

.btn-primary {
  background: var(--primary-blue);
  color: white;
  box-shadow: var(--shadow-md);
}

.btn-primary:hover {
  background: var(--primary-blue-dark);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.btn-secondary {
  background: var(--gray-200);
  color: var(--gray-700);
}

.btn-secondary:hover {
  background: var(--gray-300);
}

.btn-success {
  background: var(--secondary-green);
  color: white;
  box-shadow: var(--shadow-md);
}

.btn-success:hover {
  background: #047857;
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

/* Summary Cards */
.summary-section {
  background: white;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-lg);
  padding: var(--space-2xl);
  margin: var(--space-2xl) 0;
  border: 1px solid var(--gray-200);
}

.summary-title {
  font-size: var(--text-2xl);
  font-weight: bold;
  color: var(--gray-800);
  margin-bottom: var(--space-lg);
  text-align: center;
}

.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--space-lg);
  margin: var(--space-lg) 0;
}

.summary-card {
  background: var(--gray-50);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  border: 1px solid var(--gray-200);
}

.summary-card-title {
  font-weight: bold;
  color: var(--primary-blue);
  margin-bottom: var(--space-md);
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: var(--space-sm);
  }
  
  .step-content {
    padding: var(--space-lg);
  }
  
  .options-grid {
    grid-template-columns: 1fr;
  }
  
  .probability-impact-grid {
    grid-template-columns: 1fr;
    gap: var(--space-sm);
  }
  
  .timeline-container {
    grid-template-columns: 1fr;
  }
  
  .stakeholder-item {
    grid-template-columns: 1fr;
    gap: var(--space-sm);
    text-align: center;
  }
  
  .action-buttons {
    flex-direction: column;
  }
}

@media (max-width: 480px) {
  .header h1 {
    font-size: var(--text-xl);
  }
  
  .step-title {
    font-size: var(--text-lg);
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
}

/* Hidden Steps */
.step-card.hidden {
  display: none;
}

/* Loading States */
.loading {
  opacity: 0.6;
  pointer-events: none;
}

/* Success States */
.success-message {
  background: var(--secondary-green-light);
  border: 2px solid var(--secondary-green);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  text-align: center;
  color: var(--secondary-green);
  font-weight: 600;
  margin: var(--space-lg) 0;
}

/* Export Styles for Generated HTML */
.export-styles {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
  color: #374151;
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem;
}

.export-header {
  text-align: center;
  margin-bottom: 3rem;
  padding-bottom: 1rem;
  border-bottom: 3px solid #2563eb;
}

.export-section {
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: #f9fafb;
  border-radius: 0.75rem;
  border-left: 4px solid #2563eb;
}

.export-section h3 {
  color: #2563eb;
  margin-bottom: 1rem;
}
</style>
</head>

<body>
  <header class="header">
    <h1>üéØ Decision Analysis Tool</h1>
    <p>Smart Consequences Evaluation - Make informed decisions using systematic analysis and expected value calculations</p>
  </header>

  <div class="progress-container">
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="progress-text" id="progressText">Step 1 of 14: Define Decision & Goal</div>
  </div>

  <div class="container">
    <!-- Step 1: Define Decision & Goal -->
    <div class="step-card" data-step="1">
      <div class="step-header">
        <div class="step-number">1</div>
        <h2 class="step-title">Define Decision & Goal</h2>
        <p class="step-description">State the exact choice and what "good" looks like (1‚Äì2 measurable outcomes)</p>
      </div>
      <div class="step-content">
        <div class="form-group">
          <label for="decision" class="form-label">What specific decision are you making?</label>
          <textarea id="decision" class="form-textarea" placeholder="e.g., Sell 5 acres of farmland to fund on-farm infrastructure vs alternatives"></textarea>
        </div>
        <div class="form-group">
          <label for="goal" class="form-label">What does success look like? (Be specific and measurable)</label>
          <textarea id="goal" class="form-textarea" placeholder="e.g., Raise stable monthly income by ‚Çπ50,000 while reducing operational stress"></textarea>
        </div>
      </div>
    </div>

    <!-- Step 2: List Real Options -->
    <div class="step-card hidden" data-step="2">
      <div class="step-header">
        <div class="step-number">2</div>
        <h2 class="step-title">List Real Options</h2>
        <p class="step-description">3‚Äì5 mutually exclusive actions (including "do nothing" for contrast)</p>
      </div>
      <div class="step-content">
        <div id="optionsContainer">
          <div class="form-group">
            <label class="form-label">Option A:</label>
            <input type="text" class="form-input option-input" placeholder="e.g., Sell 5 acres immediately">
          </div>
          <div class="form-group">
            <label class="form-label">Option B:</label>
            <input type="text" class="form-input option-input" placeholder="e.g., Long-lease 5 acres instead">
          </div>
          <div class="form-group">
            <label class="form-label">Option C:</label>
            <input type="text" class="form-input option-input" placeholder="e.g., Keep land, add cash-crop + drip irrigation">
          </div>
          <div class="form-group">
            <label class="form-label">Option D:</label>
            <input type="text" class="form-input option-input" placeholder="e.g., Do nothing (status quo)">
          </div>
        </div>
        <button type="button" class="btn btn-secondary" onclick="addOption()">+ Add Another Option</button>
      </div>
    </div>

    <!-- Step 3: Map First-Order Effects -->
    <div class="step-card hidden" data-step="3">
      <div class="step-header">
        <div class="step-number">3</div>
        <h2 class="step-title">Map First-Order Effects</h2>
        <p class="step-description">Immediate, direct results for each option (money, time, energy, reputation, legal, emotion)</p>
      </div>
      <div class="step-content">
        <div id="firstOrderContainer">
          <!-- Dynamic content will be populated here -->
        </div>
      </div>
    </div>

    <!-- Step 4: Map Second/Third-Order Effects -->
    <div class="step-card hidden" data-step="4">
      <div class="step-header">
        <div class="step-number">4</div>
        <h2 class="step-title">Map Second/Third-Order Effects</h2>
        <p class="step-description">Follow-ons and feedback loops (how others react, new constraints opened/closed, habits it creates)</p>
      </div>
      <div class="step-content">
        <div id="secondOrderContainer">
          <!-- Dynamic content will be populated here -->
        </div>
      </div>
    </div>

    <!-- Step 5: Set Time Horizons -->
    <div class="step-card hidden" data-step="5">
      <div class="step-header">
        <div class="step-number">5</div>
        <h2 class="step-title">Set Time Horizons</h2>
        <p class="step-description">Now (0‚Äì3 mo), Mid (3‚Äì24 mo), Long (2+ yrs). Judge consequences on each horizon</p>
      </div>
      <div class="step-content">
        <div class="timeline-container">
          <div class="timeline-card">
            <div class="timeline-title">Now (0-3 months)</div>
            <textarea class="form-textarea" id="timelineNow" placeholder="What happens immediately?"></textarea>
          </div>
          <div class="timeline-card">
            <div class="timeline-title">Mid (3-24 months)</div>
            <textarea class="form-textarea" id="timelineMid" placeholder="What unfolds over this period?"></textarea>
          </div>
          <div class="timeline-card">
            <div class="timeline-title">Long (2+ years)</div>
            <textarea class="form-textarea" id="timelineLong" placeholder="What are the long-term effects?"></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 6: Stakeholder Scan -->
    <div class="step-card hidden" data-step="6">
      <div class="step-header">
        <div class="step-number">6</div>
        <h2 class="step-title">Stakeholder Scan</h2>
        <p class="step-description">Who's touched (you, family/team, customers, regulators, environment)? Note +/‚Äì for each</p>
      </div>
      <div class="step-content">
        <div class="stakeholder-grid" id="stakeholderContainer">
          <div class="stakeholder-item">
            <input type="text" class="form-input" placeholder="Stakeholder name (e.g., Family)">
            <div class="impact-buttons">
              <button class="impact-btn positive" onclick="toggleImpact(this, 'positive')">+ Positive</button>
              <button class="impact-btn negative" onclick="toggleImpact(this, 'negative')">‚Äì Negative</button>
            </div>
            <textarea class="form-input" placeholder="How are they affected?"></textarea>
          </div>
        </div>
        <button type="button" class="btn btn-secondary" onclick="addStakeholder()">+ Add Stakeholder</button>
      </div>
    </div>

    <!-- Step 7: Base Rates & Constraints -->
    <div class="step-card hidden" data-step="7">
      <div class="step-header">
        <div class="step-number">7</div>
        <h2 class="step-title">Base Rates & Constraints</h2>
        <p class="step-description">What usually happens in comparable cases? Note hard limits (cash, skills, laws, capacity)</p>
      </div>
      <div class="step-content">
        <div class="form-group">
          <label for="baseRates" class="form-label">Base Rates (What typically happens in similar situations?)</label>
          <textarea id="baseRates" class="form-textarea" placeholder="e.g., 70% of farmers who diversify see income increase within 18 months"></textarea>
        </div>
        <div class="form-group">
          <label for="constraints" class="form-label">Hard Constraints (Limits you cannot change)</label>
          <textarea id="constraints" class="form-textarea" placeholder="e.g., Maximum budget: ‚Çπ10 lakhs, Legal restrictions: Agricultural land laws, Time limit: Must decide by March"></textarea>
        </div>
      </div>
    </div>

    <!-- Step 8: Likelihood √ó Impact -->
    <div class="step-card hidden" data-step="8">
      <div class="step-header">
        <div class="step-number">8</div>
        <h2 class="step-title">Likelihood √ó Impact</h2>
        <p class="step-description">For each consequence, estimate Probability (L/M/H) and Impact (L/M/H). EV = Prob √ó Impact</p>
      </div>
      <div class="step-content">
        <div class="ev-calculator">
          <h4>Expected Value Calculator</h4>
          <p class="form-label">L=1, M=2, H=3 ‚Üí EV = Probability √ó Impact</p>
          <div id="evContainer">
            <!-- Dynamic EV calculations will be added here -->
          </div>
          <button type="button" class="btn btn-secondary" onclick="addEVCalculation()">+ Add Consequence</button>
        </div>
      </div>
    </div>

    <!-- Step 9: Asymmetry & Reversibility -->
    <div class="step-card hidden" data-step="9">
      <div class="step-header">
        <div class="step-number">9</div>
        <h2 class="step-title">Asymmetry & Reversibility</h2>
        <p class="step-description">Is downside capped and upside open? Reversible (move fast) vs Irreversible (slow down, test first)</p>
      </div>
      <div class="step-content">
        <div class="form-group">
          <label for="asymmetry" class="form-label">Asymmetry Analysis</label>
          <textarea id="asymmetry" class="form-textarea" placeholder="e.g., Downside: Maximum loss ‚Çπ3 crore if land value drops. Upside: Potentially unlimited if investments perform well + remaining land appreciates"></textarea>
        </div>
        <div class="form-group">
          <label for="reversibility" class="form-label">Reversibility Assessment</label>
          <div class="options-grid">
            <div class="option-card" onclick="selectReversibility('reversible')">
              <h4>Reversible Decision</h4>
              <p>Can be undone or changed easily. Move fast.</p>
            </div>
            <div class="option-card" onclick="selectReversibility('irreversible')">
              <h4>Irreversible Decision</h4>
              <p>Hard to undo. Slow down, test first.</p>
            </div>
          </div>
          <textarea id="reversibilityNotes" class="form-textarea" placeholder="Explain your reasoning and any tests you could run first..."></textarea>
        </div>
      </div>
    </div>

    <!-- Step 10: Risk Controls & Options -->
    <div class="step-card hidden" data-step="10">
      <div class="step-header">
        <div class="step-number">10</div>
        <h2 class="step-title">Risk Controls & Options</h2>
        <p class="step-description">Add guardrails: pilots, staged spend, exit clauses, insurance, diversification, buffers</p>
      </div>
      <div class="step-content">
        <div class="form-group">
          <label for="riskControls" class="form-label">Risk Mitigation Strategies</label>
          <textarea id="riskControls" class="form-textarea" placeholder="e.g., Pilots: Test infrastructure on 1 acre first. Staged spend: Release funds in phases. Exit clauses: Right to sell remaining land if needed. Buffers: Keep 6 months emergency fund"></textarea>
        </div>
      </div>
    </div>

    <!-- Step 11: Premortem -->
    <div class="step-card hidden" data-step="11">
      <div class="step-header">
        <div class="step-number">11</div>
        <h2 class="step-title">Premortem</h2>
        <p class="step-description">"It's a year later and this failed‚Äîwhy?" List top 5 causes; pre-solve or add kill-switches</p>
      </div>
      <div class="step-content">
        <div class="form-group">
          <label class="form-label">Top 5 Failure Scenarios & Solutions:</label>
          <div id="premortems">
            <div class="form-group">
              <label class="form-label">Failure Cause 1:</label>
              <input type="text" class="form-input" placeholder="e.g., Investment returns much lower than expected">
              <label class="form-label">Prevention/Kill-switch:</label>
              <input type="text" class="form-input" placeholder="e.g., Diversify across 7+ instruments, set minimum return threshold">
            </div>
            <div class="form-group">
              <label class="form-label">Failure Cause 2:</label>
              <input type="text" class="form-input" placeholder="e.g., Land values crash in the region">
              <label class="form-label">Prevention/Kill-switch:</label>
              <input type="text" class="form-input" placeholder="e.g., Keep remaining 9 acres, monitor market quarterly">
            </div>
            <div class="form-group">
              <label class="form-label">Failure Cause 3:</label>
              <input type="text" class="form-input">
              <label class="form-label">Prevention/Kill-switch:</label>
              <input type="text" class="form-input">
            </div>
            <div class="form-group">
              <label class="form-label">Failure Cause 4:</label>
              <input type="text" class="form-input">
              <label class="form-label">Prevention/Kill-switch:</label>
              <input type="text" class="form-input">
            </div>
            <div class="form-group">
              <label class="form-label">Failure Cause 5:</label>
              <input type="text" class="form-input">
              <label class="form-label">Prevention/Kill-switch:</label>
              <input type="text" class="form-input">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 12: Choose & Commit -->
    <div class="step-card hidden" data-step="12">
      <div class="step-header">
        <div class="step-number">12</div>
        <h2 class="step-title">Choose & Commit</h2>
        <p class="step-description">Pick the option with the best EV you can live with under worst-case. Write your top 3 assumptions</p>
      </div>
      <div class="step-content">
        <div class="form-group">
          <label for="finalChoice" class="form-label">Your Final Decision:</label>
          <select id="finalChoice" class="form-select">
            <option value="">Select your chosen option...</option>
          </select>
        </div>
        <div class="form-group">
          <label for="reasoning" class="form-label">Why this choice? (Expected Value reasoning)</label>
          <textarea id="reasoning" class="form-textarea" placeholder="e.g., Option A has highest EV (6.8) and worst-case scenario is still manageable with our buffers..."></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Top 3 Key Assumptions:</label>
          <input type="text" id="assumption1" class="form-input" placeholder="Assumption 1: e.g., Investment returns will average 7.5% annually">
          <input type="text" id="assumption2" class="form-input" placeholder="Assumption 2: e.g., Remaining land will appreciate as projected">
          <input type="text" id="assumption3" class="form-input" placeholder="Assumption 3: e.g., No major regulatory changes affecting agricultural land">
        </div>
      </div>
    </div>

    <!-- Step 13: Tripwires & Indicators -->
    <div class="step-card hidden" data-step="13">
      <div class="step-header">
        <div class="step-number">13</div>
        <h2 class="step-title">Tripwires & Indicators</h2>
        <p class="step-description">Define leading signals, review dates, and thresholds that trigger course-correction</p>
      </div>
      <div class="step-content">
        <div class="form-group">
          <label for="tripwires" class="form-label">Warning Signals & Thresholds:</label>
          <textarea id="tripwires" class="form-textarea" placeholder="e.g., If monthly income drops below ‚Çπ1.2L for 2 consecutive months ‚Üí review strategy. If land values drop >20% ‚Üí consider selling more. If investment portfolio drops >15% ‚Üí rebalance immediately"></textarea>
        </div>
        <div class="form-group">
          <label for="reviewDates" class="form-label">Scheduled Review Dates:</label>
          <textarea id="reviewDates" class="form-textarea" placeholder="e.g., 3-month review: March 2025, 6-month review: June 2025, Annual review: December 2025"></textarea>
        </div>
      </div>
    </div>

    <!-- Step 14: Postmortem Setup -->
    <div class="step-card hidden" data-step="14">
      <div class="step-header">
        <div class="step-number">14</div>
        <h2 class="step-title">Postmortem Setup</h2>
        <p class="step-description">After outcomes, capture what you misjudged (probabilities? impacts? hidden stakeholders?)</p>
      </div>
      <div class="step-content">
        <div class="form-group">
          <label for="postmortemPlan" class="form-label">Postmortem Learning Plan:</label>
          <textarea id="postmortemPlan" class="form-textarea" placeholder="e.g., After 1 year, review: Did probabilities match reality? Were impact estimates accurate? Any stakeholders we missed? What would we do differently? Document lessons for future decisions"></textarea>
        </div>
        <div class="form-group">
          <label for="postmortemDate" class="form-label">Postmortem Date:</label>
          <input type="date" id="postmortemDate" class="form-input">
        </div>
      </div>
    </div>

    <!-- Summary Section -->
    <div class="summary-section hidden" id="summarySection">
      <h2 class="summary-title">üìä Decision Analysis Summary</h2>
      <div id="summaryContent">
        <!-- Dynamic summary content will be populated here -->
      </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="action-buttons">
      <button class="btn btn-secondary hidden" id="prevBtn" onclick="previousStep()">‚Üê Previous</button>
      <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">Next ‚Üí</button>
      <button class="btn btn-success hidden" id="generateSummary" onclick="generateSummary()">üìä Generate Summary</button>
      <button class="btn btn-success hidden" id="exportBtn" onclick="exportAnalysis()">üìÑ Export Analysis</button>
    </div>
  </div>

  <script>
    // Global state
    let currentStep = 1;
    const totalSteps = 14;
    let analysisData = {};
    let optionCount = 4;

    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
      updateProgress();
      loadSavedData();
    });

    // Progress management
    function updateProgress() {
      const progress = (currentStep / totalSteps) * 100;
      document.getElementById('progressFill').style.width = progress + '%';
      document.getElementById('progressText').textContent = `Step ${currentStep} of ${totalSteps}: ${getStepTitle(currentStep)}`;
    }

    function getStepTitle(step) {
      const titles = [
        'Define Decision & Goal',
        'List Real Options',
        'Map First-Order Effects',
        'Map Second/Third-Order Effects',
        'Set Time Horizons',
        'Stakeholder Scan',
        'Base Rates & Constraints',
        'Likelihood √ó Impact',
        'Asymmetry & Reversibility',
        'Risk Controls & Options',
        'Premortem',
        'Choose & Commit',
        'Tripwires & Indicators',
        'Postmortem Setup'
      ];
      return titles[step - 1];
    }

    // Navigation
    function nextStep() {
      if (validateCurrentStep()) {
        saveCurrentStep();
        if (currentStep < totalSteps) {
          showStep(currentStep + 1);
        } else {
          showSummary();
        }
      }
    }

    function previousStep() {
      if (currentStep > 1) {
        saveCurrentStep();
        showStep(currentStep - 1);
      }
    }

    function showStep(stepNumber) {
      // Hide all steps
      document.querySelectorAll('.step-card').forEach(card => {
        card.classList.add('hidden');
      });
      
      // Show current step
      const stepCard = document.querySelector(`[data-step="${stepNumber}"]`);
      if (stepCard) {
        stepCard.classList.remove('hidden');
      }
      
      currentStep = stepNumber;
      updateProgress();
      updateButtons();
      
      // Special handling for certain steps
      if (stepNumber === 3) {
        populateFirstOrderEffects();
      } else if (stepNumber === 4) {
        populateSecondOrderEffects();
      } else if (stepNumber === 8) {
        setupEVCalculator();
      } else if (stepNumber === 12) {
        populateFinalChoices();
      }
    }

    function updateButtons() {
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const generateBtn = document.getElementById('generateSummary');
      
      prevBtn.classList.toggle('hidden', currentStep === 1);
      
      if (currentStep === totalSteps) {
        nextBtn.classList.add('hidden');
        generateBtn.classList.remove('hidden');
      } else {
        nextBtn.classList.remove('hidden');
        generateBtn.classList.add('hidden');
      }
    }

    function showSummary() {
      document.querySelectorAll('.step-card').forEach(card => {
        card.classList.add('hidden');
      });
      
      document.getElementById('summarySection').classList.remove('hidden');
      document.getElementById('nextBtn').classList.add('hidden');
      document.getElementById('generateSummary').classList.add('hidden');
      document.getElementById('exportBtn').classList.remove('hidden');
      
      generateSummary();
    }

    // Validation
    function validateCurrentStep() {
      const stepCard = document.querySelector(`[data-step="${currentStep}"]`);
      const requiredInputs = stepCard.querySelectorAll('input[required], textarea[required]');
      
      for (let input of requiredInputs) {
        if (!input.value.trim()) {
          input.focus();
          alert('Please fill in all required fields before continuing.');
          return false;
        }
      }
      
      return true;
    }

    // Data management
    function saveCurrentStep() {
      const stepData = {};
      const stepCard = document.querySelector(`[data-step="${currentStep}"]`);
      
      // Save all inputs in current step
      stepCard.querySelectorAll('input, textarea, select').forEach(input => {
        if (input.id) {
          stepData[input.id] = input.value;
        }
      });
      
      analysisData[`step${currentStep}`] = stepData;
      
      // Save to localStorage
      localStorage.setItem('decisionAnalysis', JSON.stringify(analysisData));
    }

    function loadSavedData() {
      const saved = localStorage.getItem('decisionAnalysis');
      if (saved) {
        analysisData = JSON.parse(saved);
        
        // Restore form values
        Object.keys(analysisData).forEach(stepKey => {
          const stepData = analysisData[stepKey];
          Object.keys(stepData).forEach(inputId => {
            const input = document.getElementById(inputId);
            if (input) {
              input.value = stepData[inputId];
            }
          });
        });
      }
    }

    // Dynamic content generation
    function addOption() {
      optionCount++;
      const container = document.getElementById('optionsContainer');
      const newOption = document.createElement('div');
      newOption.className = 'form-group';
      newOption.innerHTML = `
        <label class="form-label">Option ${String.fromCharCode(64 + optionCount)}:</label>
        <input type="text" class="form-input option-input" placeholder="Enter additional option...">
      `;
      container.appendChild(newOption);
    }

    function populateFirstOrderEffects() {
      const container = document.getElementById('firstOrderContainer');
      const options = document.querySelectorAll('.option-input');
      container.innerHTML = '';
      
      options.forEach((option, index) => {
        if (option.value.trim()) {
          const letter = String.fromCharCode(65 + index);
          const effectDiv = document.createElement('div');
          effectDiv.className = 'form-group';
          effectDiv.innerHTML = `
            <label class="form-label">Option ${letter}: ${option.value}</label>
            <textarea class="form-textarea" placeholder="Money impact: ... Time impact: ... Energy impact: ... Reputation impact: ... Legal impact: ... Emotional impact: ..."></textarea>
          `;
          container.appendChild(effectDiv);
        }
      });
    }

    function populateSecondOrderEffects() {
      const container = document.getElementById('secondOrderContainer');
      const options = document.querySelectorAll('.option-input');
      container.innerHTML = '';
      
      options.forEach((option, index) => {
        if (option.value.trim()) {
          const letter = String.fromCharCode(65 + index);
          const effectDiv = document.createElement('div');
          effectDiv.className = 'form-group';
          effectDiv.innerHTML = `
            <label class="form-label">Option ${letter}: ${option.value}</label>
            <textarea class="form-textarea" placeholder="How will others react? What new constraints open/close? What habits does this create? What feedback loops emerge?"></textarea>
          `;
          container.appendChild(effectDiv);
        }
      });
    }

    function addStakeholder() {
      const container = document.getElementById('stakeholderContainer');
      const newStakeholder = document.createElement('div');
      newStakeholder.className = 'stakeholder-item';
      newStakeholder.innerHTML = `
        <input type="text" class="form-input" placeholder="Stakeholder name">
        <div class="impact-buttons">
          <button class="impact-btn positive" onclick="toggleImpact(this, 'positive')">+ Positive</button>
          <button class="impact-btn negative" onclick="toggleImpact(this, 'negative')">‚Äì Negative</button>
        </div>
        <textarea class="form-input" placeholder="How are they affected?"></textarea>
      `;
      container.appendChild(newStakeholder);
    }

    function toggleImpact(button, type) {
      const buttons = button.parentElement.querySelectorAll('.impact-btn');
      buttons.forEach(btn => btn.classList.remove('selected'));
      button.classList.add('selected');
    }

    function setupEVCalculator() {
      const container = document.getElementById('evContainer');
      if (container.children.length === 0) {
        addEVCalculation();
      }
    }

    function addEVCalculation() {
      const container = document.getElementById('evContainer');
      const evDiv = document.createElement('div');
      evDiv.className = 'probability-impact-grid';
      evDiv.innerHTML = `
        <div class="form-group">
          <label class="form-label">Consequence:</label>
          <input type="text" class="form-input" placeholder="e.g., Investment returns exceed expectations">
        </div>
        <div class="form-group">
          <label class="form-label">Probability:</label>
          <select class="form-select probability-select" onchange="calculateEV(this)">
            <option value="">Select...</option>
            <option value="1">Low (1)</option>
            <option value="2">Medium (2)</option>
            <option value="3">High (3)</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Impact:</label>
          <select class="form-select impact-select" onchange="calculateEV(this)">
            <option value="">Select...</option>
            <option value="1">Low (1)</option>
            <option value="2">Medium (2)</option>
            <option value="3">High (3)</option>
          </select>
        </div>
        <div class="ev-result">
          <div class="form-label">EV Score:</div>
          <div class="ev-score">‚Äî</div>
        </div>
      `;
      container.appendChild(evDiv);
    }

    function calculateEV(element) {
      const row = element.closest('.probability-impact-grid');
      const probSelect = row.querySelector('.probability-select');
      const impactSelect = row.querySelector('.impact-select');
      const evScore = row.querySelector('.ev-score');
      
      if (probSelect.value && impactSelect.value) {
        const ev = parseInt(probSelect.value) * parseInt(impactSelect.value);
        evScore.textContent = ev;
        evScore.style.color = ev >= 6 ? '#059669' : ev >= 4 ? '#ea580c' : '#ef4444';
      }
    }

    function selectReversibility(type) {
      document.querySelectorAll('.option-card').forEach(card => {
        card.classList.remove('selected');
      });
      event.currentTarget.classList.add('selected');
    }

    function populateFinalChoices() {
      const select = document.getElementById('finalChoice');
      const options = document.querySelectorAll('.option-input');
      select.innerHTML = '<option value="">Select your chosen option...</option>';
      
      options.forEach((option, index) => {
        if (option.value.trim()) {
          const letter = String.fromCharCode(65 + index);
          const optionElement = document.createElement('option');
          optionElement.value = option.value;
          optionElement.textContent = `Option ${letter}: ${option.value}`;
          select.appendChild(optionElement);
        }
      });
    }

    // Summary generation
    function generateSummary() {
      const summaryContent = document.getElementById('summaryContent');
      saveCurrentStep(); // Ensure latest data is saved
      
      summaryContent.innerHTML = `
        <div class="summary-grid">
          <div class="summary-card">
            <div class="summary-card-title">üéØ Decision</div>
            <p>${analysisData.step1?.decision || 'Not specified'}</p>
          </div>
          <div class="summary-card">
            <div class="summary-card-title">üèÜ Goal</div>
            <p>${analysisData.step1?.goal || 'Not specified'}</p>
          </div>
          <div class="summary-card">
            <div class="summary-card-title">‚úÖ Final Choice</div>
            <p>${analysisData.step12?.finalChoice || 'Not selected'}</p>
          </div>
          <div class="summary-card">
            <div class="summary-card-title">üß† Key Reasoning</div>
            <p>${analysisData.step12?.reasoning || 'Not provided'}</p>
          </div>
          <div class="summary-card">
            <div class="summary-card-title">üìä Top Assumptions</div>
            <ol>
              <li>${analysisData.step12?.assumption1 || 'Not specified'}</li>
              <li>${analysisData.step12?.assumption2 || 'Not specified'}</li>
              <li>${analysisData.step12?.assumption3 || 'Not specified'}</li>
            </ol>
          </div>
          <div class="summary-card">
            <div class="summary-card-title">‚ö†Ô∏è Tripwires</div>
            <p>${analysisData.step13?.tripwires || 'Not defined'}</p>
          </div>
        </div>
        
        <div class="success-message">
          ‚úÖ Decision analysis complete! Your systematic evaluation provides a solid foundation for this important choice.
        </div>
      `;
    }

    // Export functionality
    function exportAnalysis() {
      const exportData = {
        timestamp: new Date().toISOString(),
        analysis: analysisData
      };
      
      // Create formatted HTML export
      const exportHTML = generateExportHTML(exportData);
      
      // Create and download file
      const blob = new Blob([exportHTML], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `decision-analysis-${new Date().toISOString().split('T')[0]}.html`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      alert('Decision analysis exported successfully! üìÑ');
    }

    function generateExportHTML(data) {
      return `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Decision Analysis Export - ${new Date().toLocaleDateString()}</title>
  <style>
    .export-styles {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #374151;
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
    }
    .export-header {
      text-align: center;
      margin-bottom: 3rem;
      padding-bottom: 1rem;
      border-bottom: 3px solid #2563eb;
    }
    .export-section {
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: #f9fafb;
      border-radius: 0.75rem;
      border-left: 4px solid #2563eb;
    }
    .export-section h3 {
      color: #2563eb;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="export-styles">
    <div class="export-header">
      <h1>üéØ Decision Analysis Report</h1>
      <p>Generated on ${new Date().toLocaleDateString()}</p>
    </div>
    
    <div class="export-section">
      <h3>1. Decision & Goal</h3>
      <p><strong>Decision:</strong> ${data.analysis.step1?.decision || 'Not specified'}</p>
      <p><strong>Goal:</strong> ${data.analysis.step1?.goal || 'Not specified'}</p>
    </div>
    
    <div class="export-section">
      <h3>12. Final Choice & Reasoning</h3>
      <p><strong>Chosen Option:</strong> ${data.analysis.step12?.finalChoice || 'Not selected'}</p>
      <p><strong>Reasoning:</strong> ${data.analysis.step12?.reasoning || 'Not provided'}</p>
      <p><strong>Key Assumptions:</strong></p>
      <ol>
        <li>${data.analysis.step12?.assumption1 || 'Not specified'}</li>
        <li>${data.analysis.step12?.assumption2 || 'Not specified'}</li>
        <li>${data.analysis.step12?.assumption3 || 'Not specified'}</li>
      </ol>
    </div>
    
    <div class="export-section">
      <h3>13. Monitoring & Control</h3>
      <p><strong>Tripwires:</strong> ${data.analysis.step13?.tripwires || 'Not defined'}</p>
      <p><strong>Review Schedule:</strong> ${data.analysis.step13?.reviewDates || 'Not scheduled'}</p>
    </div>
    
    <div class="export-section">
      <h3>Analysis Metadata</h3>
      <p><strong>Completed:</strong> ${new Date(data.timestamp).toLocaleString()}</p>
      <p><strong>Tool:</strong> Decision Analysis & Consequences Evaluation Tool</p>
      <p><strong>Framework:</strong> 14-Step Systematic Decision Analysis</p>
    </div>
  </div>
</body>
</html>`;
    }

    // Auto-save functionality
    setInterval(() => {
      if (currentStep <= totalSteps) {
        saveCurrentStep();
      }
    }, 30000); // Auto-save every 30 seconds
  </script>
</body>
</html>
